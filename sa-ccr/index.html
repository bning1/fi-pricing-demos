<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SA-CCR Demo</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h1>SA-CCR Demo</h1>
  <p>Simplified deterministic SA-CCR EAD for portfolio trades. AddOn_i = |δ| × MF(T) × SF × Notional, MF=√min(T/5,1). No hedging sets/buckets/correlations/adjusted N. Full formulas shown below.</p>
  <form id="saForm">
    <div class="inputs-grid">
      <div class="input-group">
        <label for="rc">Replacement Cost RC ($M):</label>
        <input type="number" id="rc" value="10" step="1" min="-1000">
      </div>
      <div class="input-group">
        <label for="threshold">Threshold Th ($M):</label>
        <input type="number" id="threshold" value="50" step="1" min="0">
      </div>
      <div class="input-group">
        <label for="floorPct">Floor (%):</label>
        <input type="number" id="floorPct" value="0" min="0" max="5" step="0.1">
      </div>
    </div>
    <h3>Editable Portfolio</h3>
    <table id="portfolioTable">
      <thead>
        <tr>
          <th>Asset Class</th>
          <th>Notional ($M)</th>
          <th>Maturity T (yr)</th>
          <th>Delta δ</th>
          <th>AddOn ($M)</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><select><option>IR</option><option selected>FX</option><option>Credit</option><option>Equity</option><option>Commodity</option></select></td>
          <td><input type="number" value="200" min="0" step="10"></td>
          <td><input type="number" value="2" min="0" step="0.25"></td>
          <td><input type="number" value="0.8" min="-1" max="1" step="0.01"></td>
          <td class="addon">-</td>
          <td><button type="button" class="del-btn">Delete</button></td>
        </tr>
        <tr>
          <td><select><option>IR</option><option>FX</option><option>Credit</option><option selected>Equity</option><option>Commodity</option></select></td>
          <td><input type="number" value="100" min="0" step="10"></td>
          <td><input type="number" value="1" min="0" step="0.25"></td>
          <td><input type="number" value="1" min="-1" max="1" step="0.01"></td>
          <td class="addon">-</td>
          <td><button type="button" class="del-btn">Delete</button></td>
        </tr>
        <tr>
          <td><select><option>IR</option><option>FX</option><option selected>Credit</option><option>Equity</option><option>Commodity</option></select></td>
          <td><input type="number" value="300" min="0" step="10"></td>
          <td><input type="number" value="5" min="0" step="0.25"></td>
          <td><input type="number" value="-0.5" min="-1" max="1" step="0.01"></td>
          <td class="addon">-</td>
          <td><button type="button" class="del-btn">Delete</button></td>
        </tr>
        <tr>
          <td><select><option selected>IR</option><option>FX</option><option>Credit</option><option>Equity</option><option>Commodity</option></select></td>
          <td><input type="number" value="150" min="0" step="10"></td>
          <td><input type="number" value="10" min="0" step="0.25"></td>
          <td><input type="number" value="1" min="-1" max="1" step="0.01"></td>
          <td class="addon">-</td>
          <td><button type="button" class="del-btn">Delete</button></td>
        </tr>
      </tbody>
    </table>
    <div class="table-actions">
      <button type="button" onclick="addRow()">+ Add Trade</button>
      <button type="button" onclick="clearPortfolio()">Clear Portfolio</button>
    </div>
  </form>
  <div id="results"></div>
  <script src="script.js"></script>
</body>
</html>